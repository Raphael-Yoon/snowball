# Snowball E2E 테스트 시나리오 리스트

## 📋 목차
1. [우선순위별 분류](#우선순위별-분류)
2. [핵심 시나리오 (High Priority)](#핵심-시나리오-high-priority)
3. [중요 시나리오 (Medium Priority)](#중요-시나리오-medium-priority)
4. [선택 시나리오 (Low Priority)](#선택-시나리오-low-priority)
5. [구현 현황](#구현-현황)

---

## 우선순위별 분류

### 🔴 High Priority (필수 - 즉시 구현)
사용자가 가장 많이 사용하는 핵심 업무 플로우

| 번호 | 시나리오명 | 커버리지 | 구현 상태 |
|-----|----------|---------|----------|
| E01 | 신규 사용자 온보딩 | Auth | ✅ 완료 |
| E02 | RCM 자동 생성 전체 플로우 | Link1 | ✅ 완료 |
| E03 | RCM 업로드 및 관리 | Link5 | ⏳ 대기 |
| E04 | 설계평가 전체 프로세스 | Link5 → Link6 | ⏳ 대기 |
| E05 | 운영평가 전체 프로세스 | Link5 → Link7 | ⏳ 대기 |

### 🟡 Medium Priority (중요 - 순차 구현)
주요 기능이지만 사용 빈도가 상대적으로 낮음

| 번호 | 시나리오명 | 커버리지 | 구현 상태 |
|-----|----------|---------|----------|
| E06 | ITGC 인터뷰 완료 플로우 | Link2 | ⏳ 대기 |
| E07 | AI 분석 요청 및 결과 확인 | Link10 | ⏳ 대기 |
| E08 | 관리자 사용자 관리 | Admin | ⏳ 대기 |
| E09 | 관리자 RCM 권한 관리 | Admin | ⏳ 대기 |

### 🟢 Low Priority (선택 - 여유시 구현)
보조 기능 또는 단위 테스트로 충분한 기능

| 번호 | 시나리오명 | 커버리지 | 구현 상태 |
|-----|----------|---------|----------|
| E10 | 운영평가 템플릿 다운로드 | Link3 | ⏳ 대기 |
| E11 | 교육자료 조회 | Link4 | ⏳ 대기 |
| E12 | 문의하기 제출 | Link9 | ⏳ 대기 |

---

## 핵심 시나리오 (High Priority)

### E01: 신규 사용자 온보딩 ✅
**목표**: 사용자가 처음 시스템에 접속하여 로그인하고 메인 화면을 탐색하는 전체 플로우

**시나리오 단계**:
1. 로그인 페이지 접속 (`/login`)
2. 이메일 입력 및 OTP 요청
3. OTP 이메일 수신 확인 (Mock)
4. OTP 입력 및 인증
5. 메인 대시보드 도달 (`/main`)
6. 주요 메뉴 카드 확인 (Dashboard, RCM, Interview 등)
7. Private/Public 섹션 확인

**검증 포인트**:
- ✅ 로그인 페이지 렌더링
- ✅ 이메일 입력 필드 작동
- ✅ OTP 페이지 전환
- ✅ 인증 성공 시 메인 페이지 리다이렉트
- ✅ 사용자명 표시
- ✅ 로그아웃 버튼 표시

**파일**: `auth_e2e_test.py` ✅ 구현 완료

---

### E02: RCM 자동 생성 전체 플로우 ✅
**목표**: Link1을 통해 ITGC RCM을 자동 생성하고 이메일로 받는 전체 플로우

**시나리오 단계**:
1. 로그인 완료 상태에서 시작
2. Link1 페이지 접속 (`/link1` 또는 `/rcm_generate`)
3. 시스템 정보 입력
   - 이메일 주소
   - 시스템명
   - 클라우드 유형 (AWS/Azure/GCP)
   - OS 유형
   - DB 유형
   - 도구 사용 여부
4. "RCM 생성" 버튼 클릭
5. 로딩 인디케이터 확인
6. 성공 메시지 표시 확인
7. 이메일 발송 확인 (Mock)

**검증 포인트**:
- ✅ RCM 생성 폼 렌더링
- ✅ 필수 필드 검증 (이메일, 시스템명)
- ✅ 드롭다운/라디오 버튼 선택 기능
- ✅ 폼 제출 후 성공 메시지
- ✅ Excel 파일 생성 확인 (Mock)
- ✅ Gmail 발송 함수 호출 확인

**파일**: `link1_e2e_test.py` ✅ 구현 완료

---

### E03: RCM 업로드 및 관리
**목표**: 사용자가 Excel RCM 파일을 업로드하고 관리하는 전체 플로우

**시나리오 단계**:
1. 로그인 완료 상태
2. Link5 RCM 관리 페이지 접속 (`/link5` 또는 `/user/rcm`)
3. "RCM 업로드" 버튼 클릭
4. 파일 선택 (테스트용 Excel 파일)
5. RCM명 입력
6. 회사명 입력
7. 카테고리 선택 (ITGC/ELC/TLC)
8. 업로드 실행
9. 업로드 진행 상태 확인
10. 성공 메시지 및 RCM 목록에 추가 확인
11. 업로드된 RCM 상세보기
12. RCM 삭제 테스트

**검증 포인트**:
- ✅ 파일 선택 UI 작동
- ✅ 파일 크기 제한 (10MB)
- ✅ 파일 타입 검증 (.xlsx만 허용)
- ✅ 필수 필드 검증
- ✅ 업로드 진행률 표시
- ✅ 성공 시 RCM 목록 갱신
- ✅ RCM 상세보기 데이터 표시
- ✅ RCM 삭제 기능

**우선순위**: 🔴 High
**예상 소요**: 2~3시간
**파일**: `link5_rcm_upload_e2e_test.py` (신규 작성 필요)

---

### E04: 설계평가 전체 프로세스
**목표**: RCM을 업로드하고 설계평가를 완료하는 전체 플로우

**시나리오 단계**:
1. 로그인 완료 상태
2. Link5에서 RCM 선택 또는 새로 업로드
3. "설계평가" 버튼 클릭 → Link6로 이동
4. 설계평가 페이지 로드 확인
5. 통제별 평가 항목 확인
   - 통제코드
   - 통제명
   - 설계평가 결과 (Effective/Ineffective)
   - 비고 입력
6. 평가 결과 입력
7. "저장" 버튼 클릭
8. 저장 성공 메시지 확인
9. 평가 완료 상태 토글
10. 완료된 평가 목록에서 확인

**검증 포인트**:
- ✅ Link5 → Link6 페이지 전환
- ✅ RCM 데이터 로드 확인
- ✅ 평가 폼 렌더링
- ✅ 드롭다운 선택 (Effective/Ineffective)
- ✅ 텍스트 입력 필드 (비고)
- ✅ 저장 기능
- ✅ 저장 후 데이터 유지 확인
- ✅ 완료 상태 토글
- ✅ 통계 업데이트 (완료율 등)

**우선순위**: 🔴 High
**예상 소요**: 3~4시간
**파일**: `link6_design_evaluation_e2e_test.py` (신규 작성 필요)

---

### E05: 운영평가 전체 프로세스
**목표**: RCM을 업로드하고 운영평가(샘플 선정, 테스트)를 완료하는 전체 플로우

**시나리오 단계**:
1. 로그인 완료 상태
2. Link5에서 RCM 선택
3. "운영평가" 버튼 클릭 → Link7로 이동
4. 운영평가 페이지 로드 확인
5. 통제 선택 (예: APD01)
6. 모집단 파일 업로드
7. 샘플 추출 설정
   - 샘플 개수 입력
   - 추출 방법 선택
8. "샘플 추출" 버튼 클릭
9. 추출된 샘플 확인
10. 샘플별 테스트 결과 입력
11. 테스트 결과 저장
12. 통제 완료 상태 토글

**검증 포인트**:
- ✅ Link5 → Link7 페이지 전환
- ✅ 통제 목록 표시
- ✅ 모집단 파일 업로드
- ✅ 파일 매핑 UI (컬럼 매핑)
- ✅ 샘플 추출 기능
- ✅ 추출된 샘플 테이블 표시
- ✅ 테스트 결과 입력 폼
- ✅ 저장 기능
- ✅ 완료 상태 업데이트

**우선순위**: 🔴 High
**예상 소요**: 4~5시간
**파일**: `link7_operation_evaluation_e2e_test.py` (신규 작성 필요)

---

## 중요 시나리오 (Medium Priority)

### E06: ITGC 인터뷰 완료 플로우
**목표**: Link2 ITGC 인터뷰를 처음부터 끝까지 완료하는 플로우

**시나리오 단계**:
1. 로그인 없이 시작 (Public 기능)
2. Link2 인터뷰 페이지 접속 (`/link2`)
3. 이메일 입력 (첫 번째 질문)
4. 시스템명 입력
5. 클라우드 선택
6. 연속 질문 답변 (30~40개)
   - 라디오 버튼 선택
   - 텍스트 입력
   - 조건부 질문 처리
7. 마지막 질문까지 완료
8. "제출" 버튼 클릭
9. Excel 생성 및 이메일 발송 확인 (Mock)
10. 완료 메시지 확인

**검증 포인트**:
- ✅ 인터뷰 페이지 렌더링
- ✅ 질문 순차 표시
- ✅ 이전/다음 버튼 작동
- ✅ 답변 저장 확인
- ✅ 진행률 표시
- ✅ 조건부 질문 처리 (특정 답변 시 추가 질문)
- ✅ 필수 답변 검증
- ✅ 제출 시 Excel 생성 (Mock)
- ✅ 성공 메시지

**우선순위**: 🟡 Medium
**예상 소요**: 3~4시간
**파일**: `link2_interview_e2e_test.py` (신규 작성 필요)

---

### E07: AI 분석 요청 및 결과 확인
**목표**: Link10 AI 분석 기능을 사용하여 내부통제 분석 결과를 받는 플로우

**시나리오 단계**:
1. 로그인 완료 상태
2. Link10 AI 분석 페이지 접속
3. 분석 대상 선택
   - 회사명 또는 RCM 선택
4. 분석 유형 선택
   - 통제 설계 분석
   - 운영 효과성 분석
   - 종합 분석
5. "분석 시작" 버튼 클릭
6. AI 분석 진행 상태 확인 (로딩 인디케이터)
7. 분석 결과 표시
   - AI 리뷰 텍스트
   - 권장사항
   - 위험 평가
8. 결과 저장 확인
9. 분석 이력 조회

**검증 포인트**:
- ✅ AI 분석 페이지 렌더링
- ✅ 선택 옵션 표시
- ✅ 분석 시작 버튼 클릭
- ✅ OpenAI API 호출 (Mock)
- ✅ 로딩 인디케이터 표시
- ✅ 결과 텍스트 렌더링
- ✅ 결과 저장 기능
- ✅ 이력 조회

**우선순위**: 🟡 Medium
**예상 소요**: 2~3시간
**파일**: `link10_ai_analysis_e2e_test.py` (신규 작성 필요)

---

### E08: 관리자 사용자 관리
**목표**: 관리자가 사용자를 등록, 수정, 삭제하는 플로우

**시나리오 단계**:
1. 관리자 계정으로 로그인
2. 관리자 페이지 접속 (`/admin`)
3. "사용자 관리" 메뉴 클릭
4. 사용자 목록 확인
5. "새 사용자 등록" 버튼 클릭
6. 사용자 정보 입력
   - 이메일
   - 이름
   - 소속
   - 권한 (일반/관리자)
   - 유효기간
7. 등록 완료 확인
8. 사용자 정보 수정 테스트
9. 사용자 삭제 테스트
10. 삭제된 사용자 목록에서 제거 확인

**검증 포인트**:
- ✅ 관리자 권한 확인
- ✅ 사용자 목록 테이블 렌더링
- ✅ 등록 폼 작동
- ✅ 필드 검증 (이메일 형식 등)
- ✅ 등록 성공 메시지
- ✅ 수정 기능
- ✅ 삭제 확인 다이얼로그
- ✅ 삭제 후 목록 갱신

**우선순위**: 🟡 Medium
**예상 소요**: 2~3시간
**파일**: `admin_user_management_e2e_test.py` (신규 작성 필요)

---

### E09: 관리자 RCM 권한 관리
**목표**: 관리자가 특정 사용자에게 RCM 접근 권한을 부여/회수하는 플로우

**시나리오 단계**:
1. 관리자 계정으로 로그인
2. 관리자 페이지 → "RCM 권한 관리"
3. 사용자 선택
4. 해당 사용자의 현재 권한 목록 확인
5. "권한 추가" 버튼 클릭
6. RCM 목록에서 선택
7. 권한 부여 완료
8. 권한 목록에서 확인
9. 권한 회수 테스트
10. 회수 후 목록 갱신 확인

**검증 포인트**:
- ✅ RCM 권한 관리 페이지 렌더링
- ✅ 사용자별 권한 목록 표시
- ✅ RCM 선택 드롭다운
- ✅ 권한 부여 기능
- ✅ 권한 회수 기능
- ✅ 변경사항 즉시 반영

**우선순위**: 🟡 Medium
**예상 소요**: 2시간
**파일**: `admin_rcm_permission_e2e_test.py` (신규 작성 필요)

---

## 선택 시나리오 (Low Priority)

### E10: 운영평가 템플릿 다운로드
**목표**: Link3에서 운영평가 템플릿을 다운로드하는 간단한 플로우

**시나리오 단계**:
1. Link3 페이지 접속
2. 템플릿 목록 확인
3. 특정 템플릿 선택
4. "다운로드" 버튼 클릭
5. 파일 다운로드 확인

**검증 포인트**:
- ✅ 템플릿 목록 렌더링
- ✅ 다운로드 버튼 클릭
- ✅ 파일 다운로드 트리거

**우선순위**: 🟢 Low (단위 테스트로 충분)
**예상 소요**: 30분

---

### E11: 교육자료 조회
**목표**: Link4에서 교육자료 및 동영상을 조회하는 플로우

**시나리오 단계**:
1. Link4 페이지 접속
2. 카테고리 목록 확인
3. 특정 카테고리 선택
4. 교육자료 목록 표시
5. 상세보기 클릭
6. 동영상 재생 확인 (optional)

**검증 포인트**:
- ✅ 페이지 렌더링
- ✅ 카테고리 필터링
- ✅ 목록 표시
- ✅ 상세보기 모달

**우선순위**: 🟢 Low (단위 테스트로 충분)
**예상 소요**: 30분

---

### E12: 문의하기 제출
**목표**: Link9 문의하기 폼을 작성하고 제출하는 플로우

**시나리오 단계**:
1. Link9 Contact 페이지 접속
2. 문의 폼 확인
3. 필드 입력
   - 이름
   - 이메일
   - 제목
   - 문의 내용
4. 제출 버튼 클릭
5. 성공 메시지 확인
6. 이메일 발송 확인 (Mock)

**검증 포인트**:
- ✅ 폼 렌더링
- ✅ 필드 검증
- ✅ 제출 기능
- ✅ 성공 메시지

**우선순위**: 🟢 Low
**예상 소요**: 1시간

---

## 구현 현황

### ✅ 완료 (2개)
- E01: 신규 사용자 온보딩 (`auth_e2e_test.py`)
- E02: RCM 자동 생성 플로우 (`link1_e2e_test.py`)

### ⏳ 대기 (10개)
**High Priority (3개)**:
- E03: RCM 업로드 및 관리
- E04: 설계평가 전체 프로세스
- E05: 운영평가 전체 프로세스

**Medium Priority (4개)**:
- E06: ITGC 인터뷰 완료
- E07: AI 분석
- E08: 관리자 사용자 관리
- E09: 관리자 RCM 권한 관리

**Low Priority (3개)**:
- E10: 템플릿 다운로드
- E11: 교육자료 조회
- E12: 문의하기

---

## 구현 우선순위 제안

### Phase 1: 핵심 업무 플로우 (1~2주)
```
1. E03: RCM 업로드 및 관리 (2~3시간)
2. E04: 설계평가 (3~4시간)
3. E05: 운영평가 (4~5시간)
```

### Phase 2: 주요 기능 (1주)
```
4. E06: ITGC 인터뷰 (3~4시간)
5. E07: AI 분석 (2~3시간)
```

### Phase 3: 관리 기능 (선택적)
```
6. E08: 관리자 사용자 관리 (2~3시간)
7. E09: 관리자 RCM 권한 (2시간)
```

### Phase 4: 보조 기능 (필요시)
```
8. E10~E12: 템플릿, 교육자료, 문의하기
```

---

## 다음 단계

### 즉시 실행 가능:
```bash
# 1. 현재 완료된 테스트 실행
python test/auth_e2e_test.py
python test/link1_e2e_test.py

# 2. 통합 사용자 여정 테스트 실행
python test/user_journey_e2e_test.py
```

### 다음 작업:
1. E03 (RCM 업로드) E2E 테스트 작성
2. E04 (설계평가) E2E 테스트 작성
3. E05 (운영평가) E2E 테스트 작성

---

**작성일**: 2026-01-18
**버전**: 1.0
**담당**: Snowball 개발팀
